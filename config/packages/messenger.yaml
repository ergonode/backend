framework:
    messenger:
        buses:
            event.bus:
                default_middleware: allow_no_handlers
                middleware:
                    - 'Ergonode\EventSourcing\Infrastructure\Middleware\DbalTransactionMiddleware'
            messenger.bus.sync:
                default_middleware: false
                middleware:
                    - 'handle_message'
            messenger.bus.async:
                default_middleware: false
                middleware:
                    - 'send_message'
                    - 'handle_message'
        default_bus: messenger.bus.sync
        routing:
#            'Ergonode\Attribute\Domain\Command\CreateAttributeCommand': core
#            'Ergonode\Attribute\Domain\Command\UpdateAttributeCommand': core

ergonode_completeness:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_COMPLETENESS_DSN)%'

ergonode_core:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_CORE_DSN)%'

ergonode_notification:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_NOTIFICATION_DSN)%'

ergonode_importer:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_IMPORT_DSN)%'

ergonode_segment:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_SEGMENT_DSN)%'

ergonode_exporter:
    messenger:
        transport: '%env(MESSENGER_TRANSPORT_EXPORT_DSN)%'
